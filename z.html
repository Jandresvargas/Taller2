<!DOCTYPE html>
<html>
<head>
   <title>Editor de Registros Geoespaciales</title>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.css" />
   <style>
      #map {
         height: 400px;
      }
   </style>
   <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
   <div id="map"></div>
   <button id="startEditingBtn">Comenzar Edici√≥n</button>
   <form id="editForm" action="bdg/editar3.php" method="POST" style="display: none;">
      <input id="lat" name="lat">
      <input id="long" name="long">
      <label for="id">ID:</label>
      <input type="text" id="id" name="id" required>
      <label for="nombre">Nombre:</label>
      <input type="text" id="nombre" name="nombre" required>
      <label for="tipo">Nombre:</label>
      <input type="text" id="tipo" name="tipo" required>
      <input type="submit" value="Guardar">
      <button type="button" id="cancelEditingBtn">Cancelar</button>

   </form>

   <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/leaflet.js"></script>
   <script>
      var map = L.map('map').setView([3.351602, -76.536017], 14);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
         attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
         maxZoom: 18,
      }).addTo(map);

      var marker = L.marker([0, 0]).addTo(map);
      var editingEnabled = false;

      map.on('click', function(e) {
         if (editingEnabled) {
            var lat = e.latlng.lat;
            var long = e.latlng.lng;

            marker.setLatLng([lat, long]);
            document.getElementById('lat').value = lat;
            document.getElementById('long').value = long;
         }
      });

      document.getElementById('startEditingBtn').addEventListener('click', function() {
         editingEnabled = true;
         document.getElementById('editForm').style.display = 'block';
      });
      document.getElementById('cancelEditingBtn').addEventListener('click', function() {
         editingEnabled = false;
         document.getElementById('editForm').style.display = 'none';
      });

      
   </script>
</body>
</html>
